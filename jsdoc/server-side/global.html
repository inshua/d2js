<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="$V"><span class="type-signature"></span>$V<span class="type-signature"></span></h4>




<div class="description">
    <p>&nbsp; <a href="V.html">V</a> 的别名。为了让校验这种功能性代码容易辨识，定义一个别名。</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_d2js_validation.js.html">WebContent/WEB-INF/jslib/d2js/validation.js</a>, <a href="WebContent_WEB-INF_jslib_d2js_validation.js.html#line61">line 61</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="$OUTP"><span class="type-signature"></span>$OUTP<span class="signature">(jdbcType, inValue<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Object.html">Object</a>}</span></h4>

    



<div class="description">
    <p>输出参数. 存储过程输出时用. 由于存储过程输出参数必须明确 JDBC 类型, 必须使用该函数封包.<br>用法:</p>
<pre class="prettyprint source lang-js"><code>    var p = $OUTP('INTEGER', 1);        // 提供参数值为 1 的一个参数
    var p2 = $OUTP('VARCHAR', $STRING('hello world'));
    d2js.call('testpkg.test(?, ?)', [p, p2]);
    println(p.result);
    println(p2.result);</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>jdbcType</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>jdbc 类型, java.sql.Types 成员, 如 INT CHAR NCHAR</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>IN OUT 型参数时提供, 纯 OUT 可不提供，可推导类型的基本类型数据, 或带有类型声明的元组</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_d2js_base.js.html">WebContent/WEB-INF/jslib/d2js/base.js</a>, <a href="WebContent_WEB-INF_jslib_d2js_base.js.html#line49">line 49</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{OUT : true, JDBC_TYPE: jdbcType, VALUE : o}</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Object.html">Object</a></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="$SQL"><span class="type-signature"></span>$SQL<span class="signature">(sql)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>在构造 SQL 语句时, 将该参数直接变为 SQL 语句的一部分.<br>仅用于构造 SQL 的场景. 如 insertRow, updateRow, deleteRow, deleteRows, mergeRow.<br>不可用于 execute, query 场景</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sql</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>SQL 语句片段, 如 seq.nextval</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_d2js_base.js.html">WebContent/WEB-INF/jslib/d2js/base.js</a>, <a href="WebContent_WEB-INF_jslib_d2js_base.js.html#line64">line 64</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="cond"><span class="type-signature"></span>cond<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>选择分支，当条件满足时，执行后面的代码。</p>
<pre class="prettyprint source"><code>    cond(cond1, then1, cond2, then2, defaultDo);</code></pre><p>用法如：</p>
<pre class="prettyprint source lang-js"><code>    cond(type=='string', function(){}, type=='int', function(){}, function(){})</code></pre><p>在 JSSP 编写中，经常需要判断满足条件执行语句，如果都分开写非常不紧凑，用这条语句能紧凑不少。如</p>
<pre class="prettyprint source"><code>    [% cond(type=='string', function(){%] abcd [%})%]</code></pre>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_jssp.js.html">WebContent/WEB-INF/jslib/jssp.js</a>, <a href="WebContent_WEB-INF_jslib_jssp.js.html#line76">line 76</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="FailedError"><span class="type-signature"></span>FailedError<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>表示失败的错误</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_lang.js.html">WebContent/WEB-INF/jslib/lang.js</a>, <a href="WebContent_WEB-INF_jslib_lang.js.html#line217">line 217</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="FatalError"><span class="type-signature"></span>FatalError<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>表示致命错误的错误</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_lang.js.html">WebContent/WEB-INF/jslib/lang.js</a>, <a href="WebContent_WEB-INF_jslib_lang.js.html#line225">line 225</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="findResource"><span class="type-signature"></span>findResource<span class="signature">(filename)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>找出文件路径。前面两个函数不用这个函数，是因为前面两个函数可能在eval的代码中调用 include 或 imports。</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filename</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_engine.js.html">src/engine.js</a>, <a href="src_engine.js.html#line139">line 139</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="imports"><span class="type-signature"></span>imports<span class="signature">(scriptFile)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>引用另一个脚本，如果已经引用过，不再重复引用<br>js不能确知该段代码文件自身的路径，现在这个功能是通过压栈来确保可以得到当前文件，动作过程如下<br>在java端 eval 脚本时，在 engine['IMPORTS_PATH_STACK'] 追加当前文件，通过获取 IMPORTS_PATH_STACK.last() 可以得到当前文件的路径<br>例如，当java eval &quot;a.js&quot; 时，栈状态为 ['a.js']<br>        当 a.js 的代码引用 b/b1.js 时，引用路径为 './b/b1.js'，栈状态为 ['a.js', 'b/b1.js']<br>            此时 b1.js 如欲引用 b/b2.js，可以使用 imports('b2.js')。因为栈顶可以取得 b/b1.js，所以可以使用关联路径。<br>            调用 import(b/b2.js) ，则栈状态变为 ['a.js', 'b/b1.js', 'b/b2.js']<br>            当 b2.js eval 完，栈状态恢复到['a.js', 'b/b1.js']<br>        当 b1.js eval 完，栈状态恢复到 ['a.js']<br>        此时，a.js 又可以按它的相对路径引用其它脚本</p>
<p>显然这个方式并不支持回调，如果在回调中要引用脚本，只能使用对默认路径的相对路径，通过 DEFAULT_IMPORTS_PATHS 获得。<br>一般网站设成 ['WEB-INF/jslib/']<br>同步程序设置成 ['js/', 'jslib/']</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scriptFile</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_engine.js.html">src/engine.js</a>, <a href="src_engine.js.html#line39">line 39</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="include"><span class="type-signature"></span>include<span class="signature">(scriptFile)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>和 imports 类似，但是可以发生重复引用</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scriptFile</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_engine.js.html">src/engine.js</a>, <a href="src_engine.js.html#line91">line 91</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="includeJssp"><span class="type-signature"></span>includeJssp<span class="signature">(jsspFile, params)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>包含另一个 jssp 文件。文件路径搜索按当前文件路径、WebContent 路径搜索确定。<br>该页面将包含入宿主页面，浏览器并未对其发出请求，故其 reqeust 对象即宿主页面的 reqeust 对象, 因此不支持查询字符串如 includeJssp('a.jssp?arg1=v1')，<br>但只要页面保证使用 params 获取参数(而不是 request.par )，也可由 params 获得参数，故可使用 includeJssp('login.jssp', {name : xxx})</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>jsspFile</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>jssp 文件名，可使用相对路径</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>传入参数</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_jssp.js.html">WebContent/WEB-INF/jslib/jssp.js</a>, <a href="WebContent_WEB-INF_jslib_jssp.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="parseDate"><span class="type-signature"></span>parseDate<span class="signature">(key, value)</span><span class="type-signature"> &rarr; {Date}</span></h4>

    



<div class="description">
    <p>为JSON解析时提供日期解析。<br>usage: JSON.parse(string, parseDate)</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="src_engine.js.html">src/engine.js</a>, <a href="src_engine.js.html#line169">line 169</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Date</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="translateObject"><span class="type-signature"></span>translateObject<span class="signature">(obj, originAttrs, map)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>对对象的属性名做映射, 得到一个新对象.<br>如</p>
<pre class="prettyprint source lang-js"><code>    translateObject({name : 'Mike', gender : 'M'}, ['name', 'gender'], ['姓名', '性别'])</code></pre><p>得到 <code>{姓名 : 'Mike', 性别 :'M'}</code></p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>obj</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"><p>原对象</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>originAttrs</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Array.html">Array</a>.&lt;string></span>


            
            </td>

            

            

            <td class="description last"><p>原属性名列表, 数组</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>map</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Array.html">Array</a>.&lt;string></span>


            
            </td>

            

            

            <td class="description last"><p>映射后的属性名列表, 数组</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_lang.js.html">WebContent/WEB-INF/jslib/lang.js</a>, <a href="WebContent_WEB-INF_jslib_lang.js.html#line263">line 263</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="ValidationError"><span class="type-signature"></span>ValidationError<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>校验错误</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_lang.js.html">WebContent/WEB-INF/jslib/lang.js</a>, <a href="WebContent_WEB-INF_jslib_lang.js.html#line233">line 233</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="wrapJsError"><span class="type-signature"></span>wrapJsError<span class="signature">(e)</span><span class="type-signature"> &rarr; {ECMAException}</span></h4>

    



<div class="description">
    <p>将 js 错误包装为可用的 java 错误, 以便在 logger.error(msg, warpJsError(error)) 中使用</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>e</code></td>
            

            <td class="type">
            
                
<span class="param-type">Error</span>


            
            </td>

            

            

            <td class="description last"><p>js error</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="WebContent_WEB-INF_jslib_lang.js.html">WebContent/WEB-INF/jslib/lang.js</a>, <a href="WebContent_WEB-INF_jslib_lang.js.html#line248">line 248</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">ECMAException</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="console.html">console</a></li><li><a href="D2JS.html">D2JS</a></li><li><a href="T.html">T</a></li><li><a href="V.html">V</a></li></ul><h3>Global</h3><ul><li><a href="global.html#$OUTP">$OUTP</a></li><li><a href="global.html#$SQL">$SQL</a></li><li><a href="global.html#$V">$V</a></li><li><a href="global.html#cond">cond</a></li><li><a href="global.html#FailedError">FailedError</a></li><li><a href="global.html#FatalError">FatalError</a></li><li><a href="global.html#findResource">findResource</a></li><li><a href="global.html#imports">imports</a></li><li><a href="global.html#include">include</a></li><li><a href="global.html#includeJssp">includeJssp</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#translateObject">translateObject</a></li><li><a href="global.html#ValidationError">ValidationError</a></li><li><a href="global.html#wrapJsError">wrapJsError</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sat Jul 09 2016 15:49:32 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>