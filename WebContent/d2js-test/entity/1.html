<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>d2js</title>

<link href="../../jslib/bootstrap-3.3.4/css/bootstrap.css" rel="stylesheet" media="screen">
<script src="../../jslib/jquery-3.2.1.js"></script>
<script src="../../jslib/bootstrap-3.3.4/js/bootstrap.min.js"></script>

<script src="../../jslib/d2js/dataset.js"></script>
<script src="../../jslib/d2js/entity-map.js"></script>
<script src="../../jslib/d2js/render.js"></script>
<script src="../../jslib/d2js/renderers.js"></script>
<script src="../../jslib/d2js/bootstrap-renderers.js"></script>
<script src="../../jslib/d2js/collector.js"></script>
<script src="../../jslib/d2js/pipelines.js"></script>
<script src="../../jslib/molecule.js"></script>

<script src="../../jslib/date.js/Date.js"></script>

</head>
<body>
	<div class="container" d2js.root="">
		<h1>author, books, publisher</h1>
		
		<h1><span data="name" renderer="std"></span><small data=email renderer="std"></small></h1>
		<hr>
		<div data="books" renderer="repeater">
			<div repeater=true>
				<h2 data="title" renderer=std></h2>
				<p data="publisher,name" renderer=std></p>
			</div>
		</div>
		
	</div>

</body>
<script>
	'use strict';
	
	(async function(){
		await d2js.meta.load(['/d2js-test/entity/author-entity.d2js', '/d2js-test/entity/book-entity.d2js', '/d2js-test/entity/publisher-entity.d2js']);
		
		let author2 = await d2js.root.Author.fetchById(2);
		$('.container').bindRoot(author2).render();
	})();
</script>
</html>