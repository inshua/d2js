<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>d2js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../jslib/bootstrap-3.3.4/css/bootstrap.css" rel="stylesheet" media="screen">
    <script src="../jslib/jquery-3.2.1.js"></script>
    <script src="../jslib/bootstrap-3.3.4/js/bootstrap.min.js"></script>

    <script src="../jslib/d2js/dataset.js"></script>
    <script src="../jslib/d2js/render.js"></script>
    <script src="../jslib/d2js/renderers.js"></script>
    <script src="../jslib/d2js/bootstrap-renderers.js"></script>
    <script src="../jslib/d2js/collector.js"></script>
    <script src="../jslib/d2js/pipelines.js"></script>

    <script src="../jslib/molecule.js"></script>


</head>
<body>
    <div molecule="TableList" table="author" edit-dialog="dialog1">
        <h1>表格编辑</h1>
        <div>
            <form class="form-inline text-right">
                <div molecule="SearchFormItem" col="name" text="Name">
                    <input type="text" molecule="SearchInput">
                </div>
                <button molecule="SearchButton">Search</button>
                <button molecule="AddButton">Add</button>                
            </form>
        </div>
        <div molecule="TableError"></div>

        <table molecule="List">
            <thead>
                <tr>
                    <th molecule="SortHeader" col="id" text="ID"></th>
                    <th molecule="SortHeader" col="name" text="Name"></th>
                    <th molecule="SortHeader" col="email" text="Email"></th>
                    <th data-t="rows,N,id" renderer="editLink"></th>
                </tr>
            </thead>
        </table>
    </div>

    <div molecule="Dialog" title="Author" id="dialog1" table="author">
        <form>
            <div molecule="FormItem" col="name" text="Name">
                <input type="text" molecule="Input">
            </div>
            <div molecule="FormItem" col="email" text="Email">
                <input type="email" molecule="Input">
            </div>
        </form>
    </div>
</body>
<script>

    var table = new d2js.DataTable('author', 'author.d2js', { pageSize: 5 });
    table.on('load', function (error) {
        d2js.render(null, this);
    });
    table.load({ _m: 'fetch' });
</script>
</html>